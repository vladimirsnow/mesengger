@media (prefers-color-scheme: dark) {
  :root {
    /* Более яркий синий для темной темы */
    --primary-color: #0b84ff;

    --bg-page: #121212;
    --bg-container: #1e1e1e;
    --bg-messages: #121212;
    --bg-msg: #3a3b3c;
    --bg-button: #444;
    --bg-button-hover: #555;

    --text-primary: #e4e6eb;
    --text-secondary: #b0b3b8;
    --text-meta: #b0b3b8;
    --text-on-own-msg: #ffffff;
    --text-placeholder: #7c7f83;

    --border-color: #4d4d4d;
    --border-color-light: #3a3b3c;
    --focus-ring-color: rgba(82, 158, 255, 0.3);

    --shadow-color: rgba(0, 0, 0, 0.5);
  }
}

/* =================================
   Адаптивность
   ================================= */
@media (max-width: 768px) {
  body {
    padding: 0;
  }

  .container {
    max-width: 100%;
    /* Устанавливаем высоту равной высоте видимой области на мобильных */
    height: 100vh; /* Фоллбэк для старых браузеров */
    height: 100dvh; /* Динамическая высота, учитывает UI браузера */
    border-radius: 0;
    padding: 16px;
    display: flex;
    flex-direction: column;
  }

  #chat {
    /* Переопределяем инлайновый display:none, когда чат становится видимым */
    display: flex !important;
    flex-direction: column;
    flex-grow: 1; /* Занять все доступное пространство */
    min-height: 0; /* Для правильной работы flex-grow в некоторых браузерах */
  }

  #messages {
    flex-grow: 1; /* Растянуть блок сообщений */
    height: auto; /* Убрать фиксированную высоту */
  }

  /* Ставим инпуты аутентификации друг под другом */
  #auth .row {
    flex-direction: column;
    align-items: stretch;
  }
}

@media (max-width: 480px) {
  /* На очень маленьких экранах переносим контролы отправки сообщения */
  .controls {
    flex-wrap: wrap;
  }

  #sendBtn {
    flex-basis: 100%; /* Кнопка отправки на всю ширину */
    margin-top: 8px;
  }
}
